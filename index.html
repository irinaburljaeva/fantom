<!DOCTYPE html>
<html lang="ru">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover" />
<title>–®–ê–ì–ê–ô –î–û–ú–ê ‚Äî –ù–∞–π–¥–∏ –ü—Ä–∏–≤–∏–¥–µ–Ω–∏–µ –û—Å–µ–Ω–Ω–µ–≥–æ –õ–∞–≥–µ—Ä—è</title>
<style>
:root {
  --page:#fff;
  --text:#222428;
  --brand:#e24a27;
  --panel:#f6f7f8;
  --shadow:rgba(0,0,0,.10);
}

/* --- –æ–±—â–∏–π —Å–±—Ä–æ—Å –∏ —à—Ä–∏—Ñ—Ç --- */
html,body{height:100%}
body{
  margin:0;
  background:var(--page);
  color:var(--text);
  font:16px/1.45 Inter,system-ui,-apple-system,Segoe UI,Roboto,Arial,sans-serif;
}
[hidden]{display:none !important}

/* —Å–∫—Ä—ã—Ç–∏–µ –±–ª–æ–∫–æ–≤ */
body.prestart #hud,
body.prestart #gameWrap {display:none !important;}
body.started #introWrap {display:none !important;}

/* ======= –∏–Ω—Ç—Ä–æ ======= */
.intro-wrap{max-width:1280px;margin:18px auto;padding:0 14px}
.intro{
  position:relative;display:grid;place-items:center;
  overflow:hidden;border-radius:24px;
  height:min(86vh,760px);background:#f4f5f7;
  box-shadow:0 22px 54px rgba(0,0,0,.10);border:1px solid rgba(0,0,0,.06)
}
.intro figure{position:absolute;inset:0;margin:0}
.intro img{width:100%;height:100%;object-fit:cover;display:block;filter:brightness(.85) saturate(1.02);opacity:0;transition:opacity .35s ease}
.intro img.ready{opacity:1}
.intro::after{
  content:"";position:absolute;inset:0;
  background:
    radial-gradient(80% 70% at 50% 50%,rgba(0,0,0,.10) 0%,rgba(0,0,0,.35) 100%),
    linear-gradient(180deg,rgba(0,0,0,.15),rgba(0,0,0,.45));
  pointer-events:none;
}
.intro .panel{
  position:relative;z-index:1;width:min(780px,92vw);
  background:rgba(255,255,255,.94);color:#202226;
  border:1px solid rgba(0,0,0,.06);border-radius:20px;
  padding:22px 22px 18px;box-shadow:0 20px 50px rgba(0,0,0,.12);backdrop-filter:blur(6px)
}
.intro h1{margin:0 0 8px;letter-spacing:.2px;font-size:clamp(22px,2.4vw + 12px,30px);line-height:1.15}
.intro p{margin:10px 0 0}
.intro blockquote{margin:14px 0;padding:14px 16px;background:#fff;border-radius:14px;border:1px solid rgba(0,0,0,.06);position:relative}
.intro blockquote::before{content:"‚Äú";position:absolute;left:10px;top:-12px;font-size:36px;color:var(--brand);opacity:.8;line-height:1}
.btn{cursor:pointer;border:0;border-radius:12px;background:var(--brand);color:#fff;font-weight:700;padding:11px 16px;box-shadow:0 6px 18px rgba(226,74,39,.25)}

/* ======= HUD ======= */
.hud{position:sticky;top:0;display:flex;gap:10px;align-items:center;padding:10px 14px;
background:linear-gradient(180deg,#fff,rgba(255,255,255,.86));z-index:5;border-bottom:1px solid rgba(0,0,0,.06)}
.badge{display:inline-flex;gap:8px;align-items:center;background:#fff;padding:8px 12px;border-radius:999px;border:1px solid rgba(0,0,0,.06)}
.brand{color:var(--brand);font-weight:700}
.progress{flex:1;height:8px;background:#eceff1;border-radius:999px;overflow:hidden}
.bar{height:100%;width:0;background:var(--brand);transition:width .35s ease}
.pill{background:#fff;border:1px solid rgba(0,0,0,.06);border-radius:14px;padding:10px 14px;color:#444}

/* ======= –∏–≥—Ä–∞ ======= */
.play-wrap{max-width:1200px;margin:10px auto 24px;padding:0 14px;display:flex;gap:18px;align-items:flex-start;flex-wrap:wrap}
.stage-wrap{position:relative;flex:1 1 680px;min-width:320px;aspect-ratio:16/10}
.stage{position:relative;width:100%;height:100%;overflow:hidden;border-radius:16px;background:#ddd center/cover no-repeat;
box-shadow:0 12px 36px var(--shadow);border:1px solid rgba(0,0,0,.06)}
.layer{position:absolute;inset:0}
#bg{transition:opacity .25s ease}
.dock{width:100%;display:flex;gap:10px;align-items:center;justify-content:space-between;margin-top:10px}

/* ======= –ø–∞–Ω–µ–ª—å —Å–ø—Ä–∞–≤–∞ ======= */
.side{flex:0 0 min(380px,34vw);background:var(--panel);border:1px solid rgba(0,0,0,.06);border-radius:16px;
padding:16px;box-shadow:0 10px 24px var(--shadow);display:none}
.side h3{margin:6px 0 8px}
.side .hint{margin:10px 0 0;background:#fff;border:1px dashed rgba(0,0,0,.2);border-radius:10px;padding:10px 12px}
.side .btns{display:flex;gap:8px;margin-top:12px;flex-wrap:wrap}

/* ======= –≤—Å–ø–æ–º–æ–≥–∞—Ç–µ–ª—å–Ω—ã–µ ======= */
.toast{position:fixed;left:50%;bottom:18px;transform:translateX(-50%);background:#111;color:#fff;padding:10px 14px;border-radius:12px;display:none;box-shadow:0 10px 24px rgba(0,0,0,.25)}
.loader{position:absolute;inset:0;display:grid;place-items:center;background:rgba(255,255,255,.35);z-index:4}
.ring{width:42px;height:42px;border-radius:50%;border:4px solid rgba(0,0,0,.12);border-top-color:var(--brand);animation:spin .9s linear infinite}
@keyframes spin{to{transform:rotate(360deg)}}

.modal{position:fixed;inset:0;display:none;place-items:center;background:rgba(0,0,0,.4);z-index:15;padding:16px}
.card{width:min(520px,92vw);background:#fff;color:#222;border:1px solid rgba(0,0,0,.08);border-radius:14px;padding:16px;box-shadow:0 16px 40px var(--shadow)}
.actions{display:flex;gap:8px;justify-content:flex-end;margin-top:10px}

.celebrate{position:absolute;inset:0;display:none;place-items:center;pointer-events:none}
.heart{font-size:64px;opacity:0;transform:scale(.7);animation:pop 1.2s ease forwards}
@keyframes pop{0%{opacity:0;transform:scale(.7) translateY(20px)}50%{opacity:1;transform:scale(1) translateY(-4px)}100%{opacity:0;transform:scale(1.15) translateY(-24px)}}

.coords{position:fixed;top:64px;left:50%;transform:translateX(-50%);background:#111;color:#fff;padding:6px 10px;border-radius:10px;display:none;z-index:9}
</style>
</head>
<body class="prestart">

<!-- ===== –í–≤–æ–¥–Ω—ã–π —ç–∫—Ä–∞–Ω ===== -->
<div class="intro-wrap" id="introWrap">
  <section id="intro" class="intro">
    <figure><img id="introImg" alt="–û—Å–µ–Ω–Ω–∏–π –ª–µ—Å"></figure>
    <div class="panel">
      <h1>–û—Å–µ–Ω–Ω–∏–π –ª–∞–≥–µ—Ä—å ¬´–®–ê–ì–ê–ô –î–û–ú–ê¬ª</h1>
      <p>–í –ª–∞–≥–µ—Ä–µ –®–ê–ì–ê–ô –î–û–ú–ê –æ—Å–µ–Ω—å—é –≤—Å–µ–≥–¥–∞ –ø—Ä–æ–∏—Å—Ö–æ–¥—è—Ç —á—É–¥–µ—Å–∞. –û–¥–Ω–∞–∂–¥—ã –≤ —á–∞—Ç –ø—Ä–∏—à–ª–æ —Å—Ç—Ä–∞–Ω–Ω–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ –æ—Ç –Ω–µ–∏–∑–≤–µ—Å—Ç–Ω–æ–≥–æ —É—á–∞—Å—Ç–Ω–∏–∫–∞:</p>
      <blockquote>
        ¬´–ü—Ä–∏–≤–µ—Ç! –Ø –∂–∏–≤—É –∑–¥–µ—Å—å —Å –ø—Ä–æ—à–ª–æ–≥–æ —Å–µ–∑–æ–Ω–∞. –Ø –ª—é–±–ª—é —á–∞–π —Å –æ–±–ª–µ–ø–∏—Ö–æ–π, –æ—Å–µ–Ω–Ω–∏–µ –ª–∏—Å—Ç—å—è –∏ —à–∞–≥–∏ –ø–æ —É—Ç—Ä–µ–Ω–Ω–µ–π —Ä–æ—Å–µ. –ê –µ—â—ë —è –Ω–µ–º–Ω–æ–∂–∫–æ‚Ä¶ –ø—Ä–æ–∑—Ä–∞—á–Ω—ã–π.¬ª
      </blockquote>
      <p>–¢–∞–∫ –≤—Å–µ —É–∑–Ω–∞–ª–∏ –ø—Ä–æ –ü—Ä–∏–≤–∏–¥–µ–Ω–∏–µ –û—Å–µ–Ω–Ω–µ–≥–æ –õ–∞–≥–µ—Ä—è ‚Äî –®–∞–≥—É–Ω—é. –û–Ω –Ω–µ –ø—É–≥–∞–µ—Ç, –∞ –ø–æ–º–æ–≥–∞–µ—Ç –¥–≤–∏–≥–∞—Ç—å—Å—è, –≥—Ä–µ—Ç—å—Å—è –∏ –Ω–µ –≥—Ä—É—Å—Ç–∏—Ç—å. –ò–≥—Ä–∞ –Ω–∞—á–∏–Ω–∞–µ—Ç—Å—è: –∑–∞ –Ω–µ–¥–µ–ª—é –Ω—É–∂–Ω–æ –Ω–∞–π—Ç–∏ –®–∞–≥—É–Ω—é –Ω–∞ –≤—Å–µ—Ö –ª–æ–∫–∞—Ü–∏—è—Ö –ª–∞–≥–µ—Ä—è –∏ –≤—ã–ø–æ–ª–Ω–∏—Ç—å –µ–≥–æ –∑–∞–¥–∞–Ω–∏—è.</p>
      <footer style="margin-top:12px"><button id="startBtn" class="btn" type="button">–ù–∞—á–∞—Ç—å –∏–≥—Ä—É</button></footer>
    </div>
  </section>
</div>

<!-- ===== HUD ===== -->
<header class="hud" id="hud">
  <div class="badge">–£—Ä–æ–≤–µ–Ω—å: <span id="levelLabel" class="brand">1/1</span></div>
  <div class="progress"><div id="progressBar" class="bar"></div></div>
  <button id="hintBtn" class="btn" type="button">–ü–æ–¥—Å–∫–∞–∑–∫–∞</button>
</header>

<!-- ===== –ò–≥—Ä–∞ ===== -->
<section class="play-wrap" id="gameWrap">
  <div class="stage-wrap">
    <div id="stage" class="stage">
      <div id="bg" class="layer"></div>
      <div id="celebrate" class="celebrate"><div class="heart">üíñ</div></div>
      <div id="loader" class="loader" hidden><div class="ring"></div></div>
      <div id="err" class="layer" style="display:none;place-items:center;color:#b00020;font-weight:600;background:rgba(255,255,255,.7)">–ù–µ —É–¥–∞–ª–æ—Å—å –∑–∞–≥—Ä—É–∑–∏—Ç—å –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ —É—Ä–æ–≤–Ω—è</div>
    </div>
    <div class="dock">
      <div id="levelTask" class="pill">–ù–∞–π–¥–∏ –®–∞–≥—É–Ω—é –Ω–∞ –∫–∞—Ä—Ç–∏–Ω–∫–µ</div>
      <div class="pill">–û—á–∫–∏: <span id="score">0</span></div>
    </div>
  </div>

  <aside id="sidePanel" class="side">
    <h3>–î–æ–±—Ä–æ–µ —É—Ç—Ä–æ!</h3>
    <p>–ü–æ—Ä–∞ —Ä–∞–∑–æ–≥–Ω–∞—Ç—å —Å–æ–Ω. –Ø –ª—é–±–ª—é –Ω–∞—á–∏–Ω–∞—Ç—å –¥–µ–Ω—å —Å –ª—ë–≥–∫–∏—Ö —à–∞–≥–æ–≤ ‚Äî –∞ —Ç—ã?</p>
    <div class="hint">
      <div>üéØ <b>–ó–∞–¥–∞–Ω–∏–µ:</b> –ø—Ä–æ–π—Ç–∏ 300 —à–∞–≥–æ–≤ –∏–ª–∏ —Å–¥–µ–ª–∞—Ç—å –∑–∞—Ä—è–¥–∫—É –Ω–∞ 2 –º–∏–Ω—É—Ç—ã.</div>
      <div style="margin-top:6px;">üïí –°–ª–µ–¥—É—é—â–∏–π —É—Ä–æ–≤–µ–Ω—å –æ—Ç–∫—Ä–æ–µ—Ç—Å—è –ø–æ—Å–ª–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –∑–∞–¥–∞–Ω–∏—è.</div>
    </div>
    <div class="btns">
      <button class="btn" id="reportBtn" type="button">–û—Ç—á–∏—Ç–∞—Ç—å—Å—è</button>
      <button class="btn" id="nextBtn" type="button" disabled style="background:#26a269">–°–ª–µ–¥—É—é—â–∏–π —É—Ä–æ–≤–µ–Ω—å</button>
    </div>
  </aside>
</section>

<!-- ===== –º–æ–¥–∞–ª–∫–∞ ===== -->
<section id="reportModal" class="modal">
  <div class="card">
    <h4>–û—Ç—á—ë—Ç –ø–æ –∑–∞–¥–∞–Ω–∏—é</h4>
    <label><input type="radio" name="task" value="steps"> –Ø –ø—Ä–æ—à—ë–ª(–ª–∞) 300 —à–∞–≥–æ–≤</label><br/>
    <label><input type="radio" name="task" value="warmup"> –Ø —Å–¥–µ–ª–∞–ª(–∞) –∑–∞—Ä—è–¥–∫—É 2 –º–∏–Ω—É—Ç—ã</label>
    <div class="actions">
      <button class="btn" id="cancelReport" type="button" style="background:#e7eaee;color:#222;box-shadow:none">–û—Ç–º–µ–Ω–∞</button>
      <button class="btn" id="submitReport" type="button">–ì–æ—Ç–æ–≤–æ</button>
    </div>
  </div>
</section>

<div id="toast" class="toast"></div>

<script>
/* === –ø—É—Ç–∏ === */
const ASSETS = { start:'start.jpg', lvl1:'lvl1.jpg', lvl1found:'lvl1found.jpg' };

/* === —É—Ä–æ–≤–Ω–∏ === */
const GAME_CONFIG = {
  levels: [{
    bg: ASSETS.lvl1,
    bgFound: ASSETS.lvl1found,
    hotspot: { x:97.25, y:53.8, w:3.4, h:11.5 },
    hint: ''
  }]
};

const $ = s => document.querySelector(s);
const introImg=$('#introImg'), startBtn=$('#startBtn'),
      stage=$('#stage'), bgLayer=$('#bg'), loader=$('#loader'),
      errLayer=$('#err'), sidePanel=$('#sidePanel'),
      levelLabel=$('#levelLabel'), progressBar=$('#progressBar'),
      scoreEl=$('#score'), toast=$('#toast'),
      nextBtn=$('#nextBtn'), reportBtn=$('#reportBtn'),
      celebrate=$('#celebrate');

let state={score:0};

/* —É—Ç–∏–ª–∏—Ç—ã */
function preload(src){return new Promise((res,rej)=>{const i=new Image();i.onload=()=>res(src);i.onerror=()=>rej(src);i.src=src;});}
function setBg(url){bgLayer.style.opacity='0';setTimeout(()=>{bgLayer.style.background=`center/cover no-repeat url('${url}')`;bgLayer.style.opacity='1';},80);}
function showToast(msg,t=1600){toast.textContent=msg;toast.style.display='block';clearTimeout(showToast.tid);showToast.tid=setTimeout(()=>toast.style.display='none',t);}
function clickToPercent(e){const r=stage.getBoundingClientRect();return {x:(e.clientX-r.left)/r.width*100,y:(e.clientY-r.top)/r.height*100};}
function pointInRect(pt,r){const L=r.x-r.w/2,R=r.x+r.w/2,T=r.y-r.h/2,B=r.y+r.h/2;return pt.x>=L&&pt.x<=R&&pt.y>=T&&pt.y<=B;}

/* –ª–æ–∞–¥–µ—Ä */
function showLoader(){loader.hidden=false;loader.style.display='grid';}
function hideLoader(){loader.hidden=true;loader.style.display='none';}

/* –∏–Ω—Ç—Ä–æ */
preload(ASSETS.start).then(src=>{introImg.src=src;introImg.onload=()=>introImg.classList.add('ready');}).catch(()=>introImg.remove());
startBtn.addEventListener('click',async()=>{
  document.body.classList.remove('prestart');
  document.body.classList.add('started');
  await startLevel(0);
});

/* –∑–∞–ø—É—Å–∫ —É—Ä–æ–≤–Ω—è */
async function startLevel(i){
  sidePanel.style.display='none';
  showLoader();errLayer.style.display='none';
  const L=GAME_CONFIG.levels[i];
  try{
    const src=await preload(L.bg);
    setBg(src);
    if(L.bgFound)preload(L.bgFound);
  }catch(e){
    errLayer.style.display='grid';
    errLayer.textContent='–ù–µ —É–¥–∞–ª–æ—Å—å –∑–∞–≥—Ä—É–∑–∏—Ç—å '+e;
  }finally{hideLoader();}
  stage.onclick=e=>{
    const pt=clickToPercent(e);
    if(L.hotspot&&pointInRect(pt,L.hotspot))onFound(L);
    else showToast('–ù–µ –∑–¥–µ—Å—å üòä –ü–æ–ø—Ä–æ–±—É–π –µ—â—ë!');
  };
}

/* –Ω–∞–π–¥–µ–Ω–æ */
function onFound(L){
  stage.animate([{transform:'scale(1)'},{transform:'scale(1.04)'},{transform:'scale(1)'}],{duration:320,easing:'ease'});
  if(L.bgFound){showLoader();setBg(L.bgFound);setTimeout(hideLoader,300);}
  sidePanel.style.display='block';
  state.score+=100;scoreEl.textContent=state.score;
}

/* –æ—Ç—á—ë—Ç–Ω–æ—Å—Ç—å */
const reportModal=$('#reportModal'),cancelReport=$('#cancelReport'),submitReport=$('#submitReport');
reportBtn.onclick=()=>{reportModal.style.display='grid';};
cancelReport.onclick=()=>{reportModal.style.display='none';};
submitReport.onclick=()=>{
  const done=document.querySelector('input[name="task"]:checked');
  if(!done){showToast('–í—ã–±–µ—Ä–∏ –≤–∞—Ä–∏–∞–Ω—Ç –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è üôÇ');return;}
  localStorage.setItem('level_done_0','1');
  reportModal.style.display='none';
  celebrate.style.display='grid';
  celebrate.firstElementChild.style.animation='none';void celebrate.firstElementChild.offsetWidth;
  celebrate.firstElementChild.style.animation='';
  setTimeout(()=>celebrate.style.display='none',1200);
  nextBtn.disabled=false;
  showToast('–û—Ç–ª–∏—á–Ω–æ! –£—Ä–æ–≤–µ–Ω—å –∑–∞—Å—á–∏—Ç–∞–Ω ‚úÖ',1800);
};
nextBtn.onclick=()=>{showToast('–í—Å–µ —É—Ä–æ–≤–Ω–∏ –ø—Ä–æ–π–¥–µ–Ω—ã! üéâ',2000);}
</script>
</body>
</html>
